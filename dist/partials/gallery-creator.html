<div class="container">
  <div class="row">
    <div class="col-lg-12" *ngIf="preview !=1">
      <h1 class="page-header">Gallery Designer <small>Sharing art your way</small></h1>
    </div>
  </div>

  <div class="row" *ngIf="preview != 1">
    <div class="col-md-4">
      <form>
        <div class="form-group">
          <label for="name">Gallery Name</label>
          <input type="text" class="form-control" placeholder="Enter Gallery name" required [(ngModel)]="model.name" ngControl="name" #name="ngForm">
          <div [hidden]="name.valid || name.pristine" class="alert alert-danger">
            Name is required
          </div>
        </div>
        <div class="form-group">
          <label for="name">Curator</label>
          <input type="text" class="form-control" placeholder="Enter name of curator" required [(ngModel)]="model.curator" ngControl="curator" #curator="ngForm">
        </div>
        <div [hidden]="curator.valid || curator.pristine" class="alert alert-danger">
          Curator is required
        </div>
        <label for="info">Gallery Description</label>
        <input type="text" class="form-control" placehold="optional Description" [(ngModel)]="model.info" ngControl="info" #info="ngForm">
        <label for="size">Size</label>
        <br>
        <button type="button" class="btn btn-primary btn-xs" (click)="setHeights('sm')">Small</button>
        <button type="button" class="btn btn-primary btn-sm" (click)="setHeights('md')">Medium</button>
        <button type="button" class="btn btn-primary" (click)="setHeights('lg')">Large</button>
      </form>

      <hr>
      <div *ngIf="works">
        <div *ngIf="Artists">
          <form>
            <div class="form-group">
              <label for="artists">Select Art</label>
              <select ngControl="state" #state="ngForm" (click)="filterArtists(state.viewModel)" class="form-control" id="artists">
                <option>All</option>
                <option *ngFor="#artist of Artists">{{artist.lastName}}, {{artist.firstName}} </option>
              </select>
            </div>
          </form>
          <div style="height:250px;overflow-y:scroll">
            <div style="height:100px" class="col-lg-4 col-sm-6 text-center" (click)="onSelect(work)" *ngFor="#work of displayedWorks">
              <img style="max-height:80px" class="img-responsive center-block" src="{{work.mainFile}}" alt="{{work.name}}">
            </div>
          </div>
        </div>
      </div>
      <hr>
      <div [hidden]="curator.errors">
        <button type="button" class="btn btn-success btn-lg" data-toggle="modal" data-target="#myModal" (click)="createPage()">Create Page</button>
        <button type="button" class="btn btn-primary btn-lg" (click)="previewPage()">Preview</button>
      </div>
    </div>
    <div class="col-md-8 text-center">
      <h2>{{model.name}}</h2>
      <div *ngIf="model.curator != ''">
        Curated by {{model.curator}}
        <hr>
      </div>
      <div style="height:{{containHeight}}px" class="col-lg-4 col-sm-6 text-center" *ngFor="#work of galleryWorks">
        <img style="max-height:{{picHeight}}px" class="img-responsive center-block" src="{{work.mainFile}}" alt="{{work.name}}">
        <h4>{{work.name}}<small> {{work.artist_fname}} {{work.artist_lname}}</small></h4>
        <button type="button" class="btn btn-danger btn-xs" (click)="removeWork(work)">Remove</button>
      </div>
    </div>
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Link</h4>
          </div>
          <div class="modal-body" style="word-wrap:break-word">
            <a [routerLink]="['/GalleryView', {id: url}]">
              <button type="button" class="btn btn-success btn-lg" data-dismiss="modal">Go to Gallery!</button>
            </a>
                <hr>
              URL:
              <br>
              {{full_url}}
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="preview==1">
    <div class="row">
      <div class="col-lg-12 text-center">
        <h2>{{model.name}}</h2>
        <div *ngIf="model.curator != ''">
          Curated by {{model.curator}}
          <hr>
        </div>
        <div style="height:{{containHeight}}px" class="col-lg-4 col-sm-6 text-center" *ngFor="#work of galleryWorks">
          <img style="max-height:{{picHeight}}px" class="img-responsive center-block" src="{{work.mainFile}}" alt="{{work.name}}">
          <h4>{{work.name}}<small> {{work.artist_fname}} {{work.artist_lname}}</small></h4>
        </div>
      </div>
    </div>
    <button type="button" class="btn btn-danger btn-lg" (click)="exitPreview()">Exit Preview</button>
  </div>
</div>
